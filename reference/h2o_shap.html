<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>SHAP values for H2O Models — h2o_shap • lares</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="SHAP values for H2O Models — h2o_shap" />
<meta property="og:description" content="SHAP (SHapley Additive exPlanations) by Lundberg and Lee (2016) is a 
method to explain individual predictions. SHAP is based on the game 
theoretically optimal Shapley Values. Calculate SHAP values for
h2o models in which each row is an observation and each column a feature.
Use plot method to visualize features importance and distributions." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lares</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.9.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/laresbernardo/lares/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>SHAP values for H2O Models</h1>
    <small class="dont-index">Source: <a href='https://github.com/laresbernardo/lares/blob/master/R/shapley.R'><code>R/shapley.R</code></a></small>
    <div class="hidden name"><code>h2o_shap.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>SHAP (SHapley Additive exPlanations) by Lundberg and Lee (2016) is a 
method to explain individual predictions. SHAP is based on the game 
theoretically optimal Shapley Values. Calculate SHAP values for
h2o models in which each row is an observation and each column a feature.
Use <code>plot</code> method to visualize features importance and distributions.</p>
    </div>

    <pre class="usage"><span class='fu'>h2o_shap</span>(<span class='kw'>model</span>, test = <span class='st'>"auto"</span>, scores = <span class='st'>"auto"</span>, y = <span class='st'>"y"</span>, <span class='kw'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p><code>h2o_automl</code> object or <code>h2o</code> model.</p></td>
    </tr>
    <tr>
      <th>test</th>
      <td><p>String or Dataframe. Leave "auto" to use <code>h2o_automl</code>'s
test dataset or pass a valid dataframe.</p></td>
    </tr>
    <tr>
      <th>scores</th>
      <td><p>Numeric vector. If test != "auto", you must provide predicted values</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>Character. If test != "auto", you must provide y variable's name</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional argument for <code>predict_contributions.H2OModel</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other SHAP: 
<code><a href='shap_var.html'>shap_var</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Train a h2o_automl model</span>
<span class='kw'>model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='h2o_automl.html'>h2o_automl</a></span>(<span class='kw'>dft</span>, <span class='kw'>Survived</span>, max_models = <span class='fl'>1</span>, target = <span class='fl'>TRUE</span>,
                    ignore = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Ticket"</span>, <span class='st'>"Cabin"</span>, <span class='st'>"PassengerId"</span>),
                    quiet = <span class='fl'>TRUE</span>)

<span class='co'># Calculate SHAP values</span>
<span class='kw'>SHAP_values</span> <span class='op'>&lt;-</span> <span class='fu'>h2o_shap</span>(<span class='kw'>model</span>)
<span class='co'># Equivalent to:</span>
<span class='co'># SHAP_values &lt;- h2o_shap(</span>
<span class='co'>#  model = model$model,</span>
<span class='co'>#  test = model$datasets$test,</span>
<span class='co'>#  scores = model$scores_test$scores)</span>

<span class='co'># Check SHAP results</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='kw'>SHAP_values</span>)

<span class='co'># Plot SHAP values (feature importances)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span>(<span class='kw'>SHAP_values</span>)

<span class='co'># Plot some of the variables (categorical)</span>
<span class='fu'><a href='shap_var.html'>shap_var</a></span>(<span class='kw'>SHAP_values</span>, <span class='kw'>Pclass</span>)

<span class='co'># Plot some of the variables (numerical)</span>
<span class='fu'><a href='shap_var.html'>shap_var</a></span>(<span class='kw'>SHAP_values</span>, <span class='kw'>Fare</span>)
}
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Bernardo Lares.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


